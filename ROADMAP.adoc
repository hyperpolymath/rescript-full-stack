// SPDX-License-Identifier: AGPL-3.0-or-later
// SPDX-FileCopyrightText: 2025 Hyperpolymath

= ReScript Full Stack Roadmap
:toc:
:icons: font

Priorities for completing the ReScript full-stack ecosystem.

== Priority Tiers

=== P0: Foundation (Done âœ…)

These components form the minimum viable full-stack:

[cols="1,3,1"]
|===
| Component | Purpose | Status

| @rescript/core
| Standard library
| âœ… Community

| @rescript/react
| React bindings
| âœ… Community

| rescript-tea
| TEA architecture + Layout + Animation
| âœ… Ours

| cadre-tea-router
| Routing + Query params + Guards
| âœ… Ours

| rescript-wasm-runtime
| Server runtime + SharedMemory + DAG
| âœ… Ours
|===

=== P1: Data Layer (Next)

Essential for any real application:

[cols="1,3,1,2"]
|===
| Component | Purpose | Status | Notes

| **rescript-postgres**
| PostgreSQL client
| â¬œ Needed
| Type-safe queries, connection pooling

| **rescript-schema**
| Runtime validation
| ğŸ”µ Community exists
| Evaluate https://github.com/DZakh/rescript-schema[rescript-schema]

| **rescript-env**
| Environment config
| â¬œ Needed
| Type-safe env vars, .env parsing

| **rescript-jwt**
| JWT handling
| â¬œ Needed
| Sign/verify, claims extraction
|===

=== P2: Real-Time & API (High Value)

For interactive applications:

[cols="1,3,1,2"]
|===
| Component | Purpose | Status | Notes

| **rescript-websocket**
| WebSocket client/server
| â¬œ Needed
| Reconnection, heartbeat, channels

| **rescript-sse**
| Server-Sent Events
| â¬œ Needed
| For real-time dashboards

| **rescript-graphql-client**
| GraphQL client
| ğŸ”µ rescript-relay exists
| Evaluate for non-Relay use cases

| **rescript-openapi**
| OpenAPI code generation
| â¬œ Needed
| Generate clients from specs
|===

=== P3: Infrastructure (Scale)

For production deployments:

[cols="1,3,1,2"]
|===
| Component | Purpose | Status | Notes

| **rescript-redis**
| Redis client
| â¬œ Needed
| Caching, pub/sub, sessions

| **rescript-s3**
| Object storage
| â¬œ Needed
| S3-compatible (AWS, Minio, R2)

| **rescript-queue**
| Message queues
| â¬œ Needed
| Generic interface, Redis/SQS backends

| **rescript-metrics**
| Observability
| â¬œ Needed
| Prometheus, OpenTelemetry
|===

=== P4: Mobile & Desktop (Expand)

For native applications:

[cols="1,3,1,2"]
|===
| Component | Purpose | Status | Notes

| **rescript-tauri**
| Tauri 2.0 bindings
| â¬œ Needed
| IPC, window, filesystem

| **rescript-capacitor**
| Capacitor bindings
| â¬œ Needed
| Alternative mobile path

| **rescript-electron**
| Electron bindings
| â¬œ Needed
| Desktop apps (heavier)
|===

=== P5: Advanced (Future)

Nice to have:

[cols="1,3,1,2"]
|===
| Component | Purpose | Status | Notes

| **rescript-grpc**
| gRPC client/server
| â¬œ Needed
| Binary protocol, streaming

| **rescript-wasm-components**
| WASM Component Model
| â¬œ Research
| Future WASM standard

| **rescript-webgpu**
| WebGPU bindings
| â¬œ Research
| GPU compute/graphics

| **rescript-ml**
| ML model inference
| â¬œ Research
| ONNX runtime bindings
|===

== Integration Matrix

How components connect:

[source,text]
----
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Browser    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚            â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚rescript-  â”‚ â”‚ cadre-  â”‚ â”‚ rescript- â”‚
        â”‚   tea     â”‚ â”‚tea-routerâ”‚ â”‚  webapi  â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   rescript-  â”‚
                    â”‚ wasm-runtime â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ SharedMem â”‚    â”‚DependencyGraphâ”‚   â”‚   HTTP/WS   â”‚
   â”‚(Zero-copy)â”‚    â”‚    (DAG)    â”‚   â”‚   Server    â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  WASM Module â”‚
                    â”‚   (Rust)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
----

== FFI Coverage by Layer

[cols="1,2,1,2"]
|===
| Layer | FFI Type | Coverage | Notes

| Browser APIs
| `@module` / `external`
| 90%
| rescript-webapi covers most

| Node.js
| `@module` / `external`
| 70%
| rescript-nodejs, prefer Deno

| Deno
| `@module` / `external`
| 60%
| rescript-wasm-runtime

| Bun
| `@module` / `external`
| 40%
| rescript-bun exists

| WASM
| SharedArrayBuffer
| 30%
| Our SharedMemory module

| Native (Tauri)
| IPC
| 10%
| Needs rescript-tauri

| Native (FFI)
| N-API / neon
| 5%
| Heavy lift, low priority
|===

== Contribution Priorities

If you want to contribute, here's where effort is most valuable:

=== Immediate Impact

1. **rescript-postgres** - Unlocks all database-backed apps
2. **rescript-websocket** - Unlocks real-time apps
3. **rescript-env** - Makes deployment easier

=== Documentation

1. Example applications showing full-stack patterns
2. Integration guides between components
3. Migration guides from TypeScript

=== Testing

1. Cross-browser testing for rescript-tea Layout
2. Performance benchmarks for SharedMemory
3. Integration tests for router + TEA

== Versioning Strategy

All hyperpolymath components follow:

* **Semantic Versioning** for releases
* **Main branch** always deployable
* **Breaking changes** only in major versions
* **Deprecation warnings** one minor version before removal

== Decision Log

=== Why Deno over Node?

* Security-first (explicit permissions)
* TypeScript native (better FFI story)
* Web-standard APIs
* Single executable distribution
* No node_modules

=== Why TEA over Redux/MobX?

* Functional purity
* Predictable state updates
* Easy testing
* Works with ReScript's type system
* Proven (Elm has 8+ years of production use)

=== Why SharedArrayBuffer over JSON?

* Zero-copy between JS and WASM
* 10-100x faster for large data
* Required for concurrent WASM
* Worth the cross-origin isolation requirement

== Timeline

No hard dates. Components are built demand-driven (see git-dispatcher/DEMAND-DRIVEN-DEVELOPMENT.adoc).

**Rough order:**

1. âœ… Q1 2025: Foundation (done)
2. ğŸ”„ Q2 2025: Data layer (postgres, schema)
3. ğŸ“‹ Q3 2025: Real-time (websocket, sse)
4. ğŸ“‹ Q4 2025: Infrastructure (redis, s3)
5. ğŸ“‹ 2026: Mobile/desktop (tauri)

== Links

* https://rescript-lang.org[ReScript Official]
* https://github.com/rescript-lang[ReScript GitHub Org]
* https://forum.rescript-lang.org[ReScript Forum]
* https://github.com/hyperpolymath[Hyperpolymath GitHub]
